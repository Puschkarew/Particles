<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <title>Gaussian Splatting Reveal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }

        #application-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>
    <script type="importmap">
    {
        "imports": {
            "playcanvas": "./iframe/playcanvas.mjs",
            "examples/observer": "./iframe/observer.mjs",
            "examples/utils": "./iframe/utils.mjs"
        }
    }
    </script>
</head>
<body>
    <canvas id="application-canvas"></canvas>
    
    <script type="module">
        // Wait a bit for import map to be processed
        await new Promise(resolve => setTimeout(resolve, 100));
        
        try {
            // Import reveal controls first to setup Lil GUI
            const { controls } = await import('./iframe/gaussian-splatting_reveal.controls.mjs');
            
            // Import observer
            const { data } = await import('examples/observer');
            
            // Create controls (Lil GUI panel) - standalone mode (no React)
            const controlsElement = controls({ 
                observer: data,
                React: null,
                jsx: null
            });
            
            // If controls returns a Promise (for async loading), wait for it
            if (controlsElement instanceof Promise) {
                await controlsElement;
            }
            
            // Import and run reveal example
            const { app } = await import('./iframe/gaussian-splatting_reveal.example.mjs');
            
            console.log('✅ Reveal example loaded successfully');
        } catch (error) {
            console.error('❌ Error loading reveal example:', error);
            console.error('Stack:', error.stack);
        }
    </script>
</body>
</html>
